<UserControl x:Class="PastryShop.View.EditUserProfileDialog"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:local="clr-namespace:PastryShop.Converter"
             FocusVisualStyle="{x:Null}">

    <UserControl.Resources>
        <local:TypeToVisibilityConverter x:Key="TypeToVisibilityConverter"/>
        <local:ImagePathToImageConverter x:Key="ImagePathToImageConverter"/>
    </UserControl.Resources>

    <UserControl.InputBindings>
        <KeyBinding Gesture="Ctrl+S" Command="{Binding SaveCommand}"/>
        <KeyBinding Gesture="Ctrl+R" Command="{Binding ResetCommand}"/>
    </UserControl.InputBindings>

    <Grid Style="{DynamicResource EditUserProfileContainerGridStyle}">

        <Grid.RowDefinitions>
            <RowDefinition Height="1*"/>
            <RowDefinition Height="6*"/>
            <RowDefinition Height="1.5*"/>
        </Grid.RowDefinitions>

        <TextBlock Grid.Row="0"
            Text="{DynamicResource EditUserProfileTitleString}" 
            Style="{DynamicResource EditUserProfileTitleTextBlockStyle}"/>

        <Border Grid.Row="1"
            Style="{DynamicResource EditUserProfileContentBorderStyle}">

            <Grid Grid.IsSharedSizeScope="True">
                <Grid.RowDefinitions>
                    <RowDefinition Height="1*"/>
                    <RowDefinition Height="1*"/>
                    <RowDefinition Height="1*"/>
                    <RowDefinition Height="1*"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="2.5*"/>
                    <ColumnDefinition Width="3*"/>
                    <ColumnDefinition Width="1*"/>
                    <ColumnDefinition Width="2*"/>
                    <ColumnDefinition Width="3*"/>
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Row="0" Grid.Column="0"
                    Text="{DynamicResource UserManagementAddUsernameString}" 
                    Style="{DynamicResource EditUserProfileTextBlockStyle}"/>

                <Grid Grid.Row="0" Grid.Column="1" VerticalAlignment="Center">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*" SharedSizeGroup="InputRow"/>
                    </Grid.RowDefinitions>
                    <TextBox Grid.Row="0"
                        x:Name="UsernameTextBox" 
                        Text="{Binding Username, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                        Validation.ErrorTemplate="{StaticResource ValidationErrorTemplate}"
                        Style="{DynamicResource EditUserProfileUsernameTextBoxStyle}"/>
                </Grid>

                <TextBlock Grid.Row="0" Grid.Column="3"
                    Text="{DynamicResource UserManagementAddPasswordString}" 
                    Style="{DynamicResource EditUserProfileTextBlockStyle}"/>
                <Grid Grid.Row="0" Grid.Column="4" VerticalAlignment="Center">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*" SharedSizeGroup="InputRow"/>
                        <RowDefinition Height="20"/>
                    </Grid.RowDefinitions>
                    <PasswordBox Grid.Row="0"
                         x:Name="PasswordBox"
                         PasswordChanged="PasswordBox_PasswordChanged"
                         Style="{DynamicResource EditUserProfilePasswordBoxStyle}"/>
                    <Label Grid.Row="1"
                       Content="{Binding PasswordError}"
                       Visibility="{Binding PasswordError, Converter={StaticResource TypeToVisibilityConverter}, ConverterParameter=StringNotEmpty}"
                       Style="{DynamicResource EditUserProfilePasswordErrorLabelStyle}"/>
                </Grid>

                <TextBlock Grid.Row="1" Grid.Column="0"
                    Text="{DynamicResource UserManagementAddFirstNameString}" 
                    Style="{DynamicResource EditUserProfileTextBlockStyle}"/>
                <TextBox Grid.Row="1" Grid.Column="1"
                    Text="{Binding FirstName, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                    Validation.ErrorTemplate="{StaticResource ValidationErrorTemplate}"
                    Style="{DynamicResource EditUserProfileTextBoxStyle}"/>

                <TextBlock Grid.Row="1" Grid.Column="3"
                    Text="{DynamicResource UserManagementAddLastNameString}" 
                    Style="{DynamicResource EditUserProfileTextBlockStyle}"/>
                <TextBox Grid.Row="1" Grid.Column="4"
                    Text="{Binding LastName, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                    Validation.ErrorTemplate="{StaticResource ValidationErrorTemplate}"
                    Style="{DynamicResource EditUserProfileTextBoxStyle}"/>

                <TextBlock Grid.Row="2" Grid.Column="0"
                    Text="{DynamicResource UserManagementAddPhoneNumberString}" 
                    Style="{DynamicResource EditUserProfileTextBlockStyle}"/>
                <TextBox Grid.Row="2" Grid.Column="1"
                    Text="{Binding PhoneNumber, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                    Validation.ErrorTemplate="{StaticResource ValidationErrorTemplate}"
                    Style="{DynamicResource EditUserProfileTextBoxStyle}"/>

                <TextBlock Grid.Row="2" Grid.Column="3"
                    Text="{DynamicResource UserManagementAddAddressString}" 
                    Style="{DynamicResource EditUserProfileTextBlockStyle}"/>
                <TextBox Grid.Row="2" Grid.Column="4"
                    Text="{Binding Address, Mode=TwoWay, ValidatesOnDataErrors=True}" 
                    Validation.ErrorTemplate="{StaticResource ValidationErrorTemplate}"
                    Style="{DynamicResource EditUserProfileTextBoxStyle}"/>

                <Image Grid.Row="3" Grid.Column="0"
                    Source="{Binding SelectedImagePath, Converter={StaticResource ImagePathToImageConverter}}"
                    Style="{DynamicResource EditUserProfileImageStyle}"/>
                <Button Grid.Row="3" Grid.Column="1" 
                    Content="{DynamicResource UserManagementAddSelectImageString}"
                    Command="{Binding BrowseImageCommand}" 
                    Style="{DynamicResource EditUserProfileImageButtonStyle}"/>

            </Grid>
        </Border>

        <StackPanel Grid.Row="2" Style="{DynamicResource EditUserProfileContainerButtonStackPanelStyle}">
            <Button Content="{DynamicResource EditUserProfileSaveButtonString}" Command="{Binding SaveCommand}" IsDefault="True" Style="{DynamicResource EditUserProfileSaveButtonStyle}"/>
            <Button Content="{DynamicResource EditUserProfileResetButtonString}" Command="{Binding ResetCommand}"  Style="{DynamicResource EditUserProfileResetButtonStyle}"/>
        </StackPanel>

    </Grid>

</UserControl>