<Window x:Class="PastryShop.View.ManagerAddUserDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:xctk="http://schemas.xceed.com/wpf/xaml/toolkit"
        xmlns:local="clr-namespace:PastryShop.Converter"
        WindowStyle="None"
        ResizeMode="NoResize"
        WindowStartupLocation="CenterScreen"
        Loaded="Window_Loaded"
        Width="900" Height="700">

    <Window.Resources>
        <local:TypeToVisibilityConverter x:Key="TypeToVisibilityConverter"/>
        <local:FilterOptionToImagePathConverter x:Key="FilterOptionToImagePathConverter"/>
        <local:ImagePathToImageConverter x:Key="ImagePathToImageConverter"/>

        <DataTemplate x:Key="EmptyTemplate">
            <Grid/>
        </DataTemplate>
        <DataTemplate x:Key="ManagerTemplate">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="1*"/>
                    <ColumnDefinition Width="1*"/>
                </Grid.ColumnDefinitions>
                <TextBlock Grid.Column="0"
                    Text="{DynamicResource UserManagementAddDepartmentString}" 
                    Style="{DynamicResource UserManagementAddRightTextBlockStyle}"/>
                <TextBox Grid.Column="1"
                    Text="{Binding Department, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                    Validation.ErrorTemplate="{StaticResource ValidationErrorTemplate}"
                    Style="{DynamicResource UserManagementAddTextBoxStyle}"/>
            </Grid>
        </DataTemplate>
        <DataTemplate x:Key="CashierTemplate">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="1*"/>
                    <ColumnDefinition Width="1*"/>
                </Grid.ColumnDefinitions>
                <TextBlock Grid.Column="0"
                    Text="{DynamicResource UserManagementAddCashRegisterIDString}" 
                    Style="{DynamicResource UserManagementAddRightTextBlockStyle}"/>
                <TextBox Grid.Column="1"
                     Text="{Binding CashRegisterIdText, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                     Validation.ErrorTemplate="{StaticResource ValidationErrorTemplate}"
                     Style="{DynamicResource UserManagementAddTextBoxStyle}"/>
            </Grid>
        </DataTemplate>
    </Window.Resources>

    <Grid Style="{DynamicResource UserManagementAddContainerGridStyle}">

        <Grid.RowDefinitions>
            <RowDefinition Height="1*"/>
            <RowDefinition Height="6*"/>
            <RowDefinition Height="1*"/>
        </Grid.RowDefinitions>

        <TextBlock Grid.Row="0" 
            Text="{DynamicResource UserManagementAddTitleString}" 
            Style="{DynamicResource UserManagementAddTitleTextBlockStyle}"/>

        <Border Grid.Row="1"
            Style="{DynamicResource UserManagementAddContentBorderStyle}">

            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="1*"/>
                    <RowDefinition Height="1*"/>
                    <RowDefinition Height="1*"/>
                    <RowDefinition Height="1*"/>
                    <RowDefinition Height="1*"/>
                    <RowDefinition Height="1*"/>
                    <RowDefinition Height="1*"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="1*"/>
                    <ColumnDefinition Width="1*"/>
                    <ColumnDefinition Width="1*"/>
                    <ColumnDefinition Width="1*"/>
                </Grid.ColumnDefinitions>

                <StackPanel Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="4" 
                    Style="{DynamicResource UserManagementAddContainerUserTypeStackPanelStyle}">

                    <TextBlock 
                        Text="{DynamicResource UserManagementAddUserTypeString}" 
                        Style="{DynamicResource UserManagementAddUserTypeTextBlockStyle}"/>

                    <ComboBox 
                        ItemsSource="{Binding UserTypes}"
                        SelectedItem="{Binding SelectedUserType, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                        Validation.ErrorTemplate="{StaticResource ValidationErrorTemplate}"
                        Style="{DynamicResource UserManagementAddComboBoxStyle}"
                        ItemContainerStyle="{DynamicResource UserManagementAddComboBoxItemStyle}">
                        <ComboBox.ItemTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding}" Style="{DynamicResource UserManagementAddComboBoxItemTextBlockStyle}"/>
                            </DataTemplate>
                        </ComboBox.ItemTemplate>
                    </ComboBox>
                </StackPanel>

                <TextBlock Grid.Row="1" Grid.Column="0" 
                    Text="{DynamicResource UserManagementAddUsernameString}" 
                    Style="{DynamicResource UserManagementAddLeftTextBlockStyle}"/>
                <TextBox Grid.Row="1" Grid.Column="1" 
                    Text="{Binding Username, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                    Validation.ErrorTemplate="{StaticResource ValidationErrorTemplate}"
                    Style="{DynamicResource UserManagementAddTextBoxStyle}"/>

                <TextBlock Grid.Row="1" Grid.Column="2" 
                    Text="{DynamicResource UserManagementAddPasswordString}" 
                    Style="{DynamicResource UserManagementAddRightTextBlockStyle}"/>

                <StackPanel Grid.Row="1" Grid.Column="3" Orientation="Vertical">
                    <PasswordBox
                        Name="PasswordBox" 
                        PasswordChanged="PasswordBox_PasswordChanged"
                        Style="{DynamicResource UserManagementAddPasswordBoxStyle}"/>
                    <Label
                        Content="{Binding PasswordError}"    
                        Visibility="{Binding PasswordError, Converter={StaticResource TypeToVisibilityConverter}, ConverterParameter=StringNotEmpty}"
                        Style="{DynamicResource UserManagementAddPasswordErrorLabelStyle}"/>
                </StackPanel>

                <TextBlock Grid.Row="2" Grid.Column="0"
                    Text="{DynamicResource UserManagementAddFirstNameString}" 
                    Style="{DynamicResource UserManagementAddLeftTextBlockStyle}"/>
                <TextBox Grid.Row="2" Grid.Column="1"
                    Text="{Binding FirstName, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                    Validation.ErrorTemplate="{StaticResource ValidationErrorTemplate}"
                    Style="{DynamicResource UserManagementAddTextBoxStyle}"/>

                <TextBlock Grid.Row="2" Grid.Column="2"
                    Text="{DynamicResource UserManagementAddLastNameString}" 
                    Style="{DynamicResource UserManagementAddRightTextBlockStyle}"/>
                <TextBox Grid.Row="2" Grid.Column="3"
                    Text="{Binding LastName, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                    Validation.ErrorTemplate="{StaticResource ValidationErrorTemplate}"
                    Style="{DynamicResource UserManagementAddTextBoxStyle}"/>

                <TextBlock Grid.Row="3" Grid.Column="0"
                    Text="{DynamicResource UserManagementAddPhoneNumberString}" 
                    Style="{DynamicResource UserManagementAddLeftTextBlockStyle}"/>
                <TextBox Grid.Row="3" Grid.Column="1"
                    Text="{Binding PhoneNumber, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                    Validation.ErrorTemplate="{StaticResource ValidationErrorTemplate}"
                    Style="{DynamicResource UserManagementAddTextBoxStyle}"/>

                <TextBlock Grid.Row="3" Grid.Column="2" 
                    Text="{DynamicResource UserManagementAddAddressString}" 
                    Style="{DynamicResource UserManagementAddRightTextBlockStyle}"/>
                <TextBox Grid.Row="3" Grid.Column="3"
                    Text="{Binding CurrentUserDTO.Address, Mode=TwoWay, ValidatesOnDataErrors=True}" 
                    Validation.ErrorTemplate="{StaticResource ValidationErrorTemplate}"
                    Style="{DynamicResource UserManagementAddTextBoxStyle}"/>

                <TextBlock Grid.Row="4" Grid.Column="0"
                    Text="{DynamicResource UserManagementAddSalaryString}" 
                    Style="{DynamicResource UserManagementAddLeftTextBlockStyle}"/>
                <TextBox Grid.Row="4" Grid.Column="1"
                    Text="{Binding SalaryText, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                    Validation.ErrorTemplate="{StaticResource ValidationErrorTemplate}"
                    Style="{DynamicResource UserManagementAddTextBoxStyle}"/>

                <ContentControl Grid.Row="4" Grid.Column="2" Grid.ColumnSpan="2" 
                    Content="{Binding}" Validation.ErrorTemplate="{x:Null}">
                    <ContentControl.Style>
                        <Style TargetType="ContentControl">
                            <Setter Property="ContentTemplate" Value="{StaticResource EmptyTemplate}"/>
                            <Setter Property="IsTabStop" Value="False"/>
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding SelectedUserType}" Value="Manager">
                                    <Setter Property="ContentTemplate" Value="{StaticResource ManagerTemplate}"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding SelectedUserType}" Value="Cashier">
                                    <Setter Property="ContentTemplate" Value="{StaticResource CashierTemplate}"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </ContentControl.Style>
                </ContentControl>

                <TextBlock Grid.Row="5" Grid.Column="0"
                    Text="{DynamicResource UserManagementAddImagePathString}" 
                    Style="{DynamicResource UserManagementAddLeftTextBlockStyle}"/>
                <Button Grid.Row="5" Grid.Column="1" 
                    Content="{DynamicResource UserManagementAddSelectImageString}" 
                    Command="{Binding BrowseImageCommand}" 
                    Style="{DynamicResource UserManagementAddImageButtonStyle}"/>
                <Image Grid.Row="6" Grid.Column="1"
                    Source="{Binding SelectedImagePath, Converter={StaticResource ImagePathToImageConverter}}"
                    Style="{DynamicResource UserManagementAddImageStyle}">
                </Image>

                <TextBlock Grid.Row="5" Grid.Column="2"
                    Text="{DynamicResource UserManagementAddShiftStartString}" 
                    Style="{DynamicResource UserManagementAddRightTextBlockStyle}"
                    Visibility="{Binding IsCashierVisible, Converter={StaticResource TypeToVisibilityConverter}, ConverterParameter=Bool}"/>
                <xctk:DateTimePicker x:Name="ShiftStartPicker"
                    Grid.Row="5" Grid.Column="3"
                    Value="{Binding ShiftStart, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                    Validation.ErrorTemplate="{StaticResource ValidationErrorTemplate}"
                    Format="Custom" FormatString="yyyy-MM-dd HH:mm"
                    Visibility="{Binding IsCashierVisible, Converter={StaticResource TypeToVisibilityConverter}, ConverterParameter=Bool}"
                    Style="{DynamicResource UserManagementAddDateTimePickerStyle}"/>

                <TextBlock Grid.Row="6" Grid.Column="2"
                    Text="{DynamicResource UserManagementAddShiftEndString}" 
                    Style="{DynamicResource UserManagementAddRightTextBlockStyle}"
                    Visibility="{Binding IsCashierVisible, Converter={StaticResource TypeToVisibilityConverter}, ConverterParameter=Bool}"/>
                <xctk:DateTimePicker x:Name="ShiftEndPicker"
                    Grid.Row="6" Grid.Column="3"
                    Value="{Binding ShiftEnd, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                    Validation.ErrorTemplate="{StaticResource ValidationErrorTemplate}"
                    Format="Custom" FormatString="yyyy-MM-dd HH:mm"
                    Visibility="{Binding IsCashierVisible, Converter={StaticResource TypeToVisibilityConverter}, ConverterParameter=Bool}"
                    Style="{DynamicResource UserManagementAddDateTimePickerStyle}"/>

            </Grid>
        </Border>

        <StackPanel Grid.Row="2" Style="{DynamicResource UserManagementAddContainerButtonStackPanelStyle}">
            <Button Content="{DynamicResource UserManagementAddSaveButtonString}" Command="{Binding AddCommand}" IsDefault="True" Style="{DynamicResource UserManagementAddSaveButtonStyle}"/>
            <Button Content="{DynamicResource UserManagementAddCancelButtonString}" IsCancel="True" Style="{DynamicResource UserManagementAddCancelButtonStyle}"/>
        </StackPanel>

    </Grid>

</Window>