<Window x:Class="PastryShop.View.ManagerEditProductProfileDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:PastryShop.Converter"
        WindowStyle="None"
        ResizeMode="NoResize"
        WindowStartupLocation="CenterScreen"
        Loaded="Window_Loaded"
        Width="900" Height="700">

    <Window.Resources>
        <local:TypeToVisibilityConverter x:Key="TypeToVisibilityConverter"/>
        <local:ImagePathToImageConverter x:Key="ImagePathToImageConverter"/>
        <local:EnumToResourceKeyConverter x:Key="EnumToResourceKeyConverter"/>

        <DataTemplate x:Key="FoodProductProfile">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="1*"/>
                    <RowDefinition Height="1*"/>
                    <RowDefinition Height="1*"/>
                    <RowDefinition Height="1*"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="1*"/>
                    <ColumnDefinition Width="1*"/>
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Row="0" Grid.Column="0" 
                    Text="{DynamicResource ProductManagementProfileEditFoodTypeString}"   
                    Style="{DynamicResource ProductManagementProfileEditRightTextBlockStyle}"/>
                <ComboBox Grid.Row="0" Grid.Column="1" 
                    ItemsSource="{Binding DataContext.FoodTypes, RelativeSource={RelativeSource AncestorType=Window}}"
                    SelectedItem="{Binding FoodType, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                    Style="{DynamicResource ProductManagementProfileEditComboBoxStyle}"
                    ItemContainerStyle="{DynamicResource ProductManagementProfileEditComboBoxItemStyle}">
                    <ComboBox.ItemTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding Converter={StaticResource EnumToResourceKeyConverter}, ConverterParameter=ProductManagement}"
                                Style="{DynamicResource ProductManagementProfileEditComboBoxItemTextBlockStyle}"/>
                        </DataTemplate>
                    </ComboBox.ItemTemplate>
                </ComboBox>

                <TextBlock Grid.Row="1" Grid.Column="0" 
                    Text="{DynamicResource ProductManagementProfileEditWeightString}"   
                    Style="{DynamicResource ProductManagementProfileEditRightTextBlockStyle}"/>
                <TextBox Grid.Row="1" Grid.Column="1"
                    Text="{Binding DataContext.WeightText, RelativeSource={RelativeSource AncestorType=Window}, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                    Validation.ErrorTemplate="{StaticResource ValidationErrorTemplate}"
                    Style="{DynamicResource ProductManagementProfileEditTextBoxStyle}"/>

                <TextBlock Grid.Row="2" Grid.Column="0" 
                    Text="{DynamicResource ProductManagementProfileEditCaloriesString}"   
                    Style="{DynamicResource ProductManagementProfileEditRightTextBlockStyle}"/>
                <TextBox Grid.Row="2" Grid.Column="1"
                    Text="{Binding DataContext.CaloriesText, RelativeSource={RelativeSource AncestorType=Window}, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                    Validation.ErrorTemplate="{StaticResource ValidationErrorTemplate}"
                    Style="{DynamicResource ProductManagementProfileEditTextBoxStyle}"/>

                <StackPanel Grid.Row="3" Grid.Column="0" Orientation="Horizontal">
                    <TextBlock Text="{DynamicResource ProductManagementProfileEditPerishableString}" Style="{DynamicResource ProductManagementProfileEditRightTextBlockStyle}"/>
                    <CheckBox IsChecked="{Binding IsPerishable, UpdateSourceTrigger=PropertyChanged}" Style="{DynamicResource ProductManagementProfileEditCheckBoxStyle}"/>
                </StackPanel>

            </Grid>
        </DataTemplate>

        <DataTemplate x:Key="DrinkProductProfile">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="1*"/>
                    <RowDefinition Height="1*"/>
                    <RowDefinition Height="1*"/>
                    <RowDefinition Height="1*"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="1*"/>
                    <ColumnDefinition Width="1*"/>
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Row="0" Grid.Column="0" 
                    Text="{DynamicResource ProductManagementProfileEditVolumeString}"   
                    Style="{DynamicResource ProductManagementProfileEditRightTextBlockStyle}"/>
                <TextBox Grid.Row="0" Grid.Column="1"
                    Text="{Binding DataContext.VolumeText, RelativeSource={RelativeSource AncestorType=Window}, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                    Validation.ErrorTemplate="{StaticResource ValidationErrorTemplate}"
                    Style="{DynamicResource ProductManagementProfileEditTextBoxStyle}"/>

                <StackPanel Grid.Row="1" Grid.Column="0" Orientation="Horizontal">
                    <TextBlock Text="{DynamicResource ProductManagementProfileEditAlcoholicString}" Style="{DynamicResource ProductManagementProfileEditRightTextBlockStyle}"/>
                    <CheckBox IsChecked="{Binding IsAlcoholic, UpdateSourceTrigger=PropertyChanged}" Style="{DynamicResource ProductManagementProfileEditCheckBoxStyle}"/>
                </StackPanel>

            </Grid>
        </DataTemplate>

        <DataTemplate x:Key="AccessoryProductProfile">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="1*"/>
                    <RowDefinition Height="1*"/>
                    <RowDefinition Height="1*"/>
                    <RowDefinition Height="1*"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="1*"/>
                    <ColumnDefinition Width="1*"/>
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Row="0" Grid.Column="0" 
                    Text="{DynamicResource ProductManagementProfileEditMaterialString}"   
                    Style="{DynamicResource ProductManagementProfileEditRightTextBlockStyle}"/>
                <TextBox Grid.Row="0" Grid.Column="1"
                    Text="{Binding DataContext.MaterialText, RelativeSource={RelativeSource AncestorType=Window}, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                    Validation.ErrorTemplate="{StaticResource ValidationErrorTemplate}"
                    Style="{DynamicResource ProductManagementProfileEditTextBoxStyle}"/>

                <TextBlock Grid.Row="1" Grid.Column="0" 
                    Text="{DynamicResource ProductManagementProfileEditDimensionsString}"   
                    Style="{DynamicResource ProductManagementProfileEditRightTextBlockStyle}"/>
                <TextBox Grid.Row="1" Grid.Column="1"
                    Text="{Binding DataContext.DimensionsText, RelativeSource={RelativeSource AncestorType=Window}, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"             
                    Validation.ErrorTemplate="{StaticResource ValidationErrorTemplate}"
                    Style="{DynamicResource ProductManagementProfileEditTextBoxStyle}"/>

                <StackPanel Grid.Row="2" Grid.Column="0" Orientation="Horizontal">
                    <TextBlock Text="{DynamicResource ProductManagementProfileEditReusableString}" Style="{DynamicResource ProductManagementProfileEditRightTextBlockStyle}"/>
                    <CheckBox IsChecked="{Binding IsReusable, UpdateSourceTrigger=PropertyChanged}" Style="{DynamicResource ProductManagementProfileEditCheckBoxStyle}"/>
                </StackPanel>

            </Grid>
        </DataTemplate>
    </Window.Resources>

    <Grid Style="{DynamicResource ProductManagementProfileEditContainerGridStyle}">

        <Grid.RowDefinitions>
            <RowDefinition Height="2*"/>
            <RowDefinition Height="7*"/>
            <RowDefinition Height="2*"/>
        </Grid.RowDefinitions>

        <TextBlock Grid.Row="0" 
            Text="{DynamicResource ProductManagementProfileEditTitleString}"   
            Style="{DynamicResource ProductManagementProfileEditTitleTextBlockStyle}"/>

        <Border Grid.Row="1"
            Style="{DynamicResource ProductManagementProfileEditContentBorderStyle}">

            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="1*"/>
                    <RowDefinition Height="1*"/>
                    <RowDefinition Height="1*"/>
                    <RowDefinition Height="1*"/>
                    <RowDefinition Height="1*"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="2*"/>
                    <ColumnDefinition Width="3*"/>
                    <ColumnDefinition Width="2*"/>
                    <ColumnDefinition Width="3*"/>
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Row="0" Grid.Column="0"
                    Text="{DynamicResource ProductManagementProfileEditNameString}"   
                    Style="{DynamicResource ProductManagementProfileEditLeftTextBlockStyle}"/>
                <TextBox Grid.Row="0" Grid.Column="1" 
                    Text="{Binding Name, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}" 
                    Validation.ErrorTemplate="{StaticResource ValidationErrorTemplate}"
                    Style="{DynamicResource ProductManagementProfileEditTextBoxStyle}"/>

                <TextBlock Grid.Row="1" Grid.Column="0" Grid.RowSpan="2"
                    Text="{DynamicResource ProductManagementProfileEditDescriptionString}"   
                    Style="{DynamicResource ProductManagementProfileEditLeftTextBlockStyle}"/>
                <TextBox Grid.Row="1" Grid.Column="1" Grid.RowSpan="2"
                    Text="{Binding Description, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}" 
                    Validation.ErrorTemplate="{StaticResource ValidationErrorTemplate}"
                    Style="{DynamicResource ProductManagementProfileEditDescriptionTextBoxStyle}"/>

                <Image Grid.Row="3" Grid.Column="0" Grid.RowSpan="2"
                    Source="{Binding SelectedImagePath, Converter={StaticResource ImagePathToImageConverter}, ConverterParameter=Products}"
                    Style="{DynamicResource ProductManagementProfileEditImageStyle}"/>
                <Button Grid.Row="3" Grid.Column="1" Grid.RowSpan="2"
                    Content="{DynamicResource ProductManagementProfileEditSelectImageString}"   
                    Command="{Binding BrowseImageCommand}" 
                    Style="{DynamicResource ProductManagementProfileEditImageButtonStyle}"/>

                <ContentControl Grid.Row="0" Grid.Column="2" Grid.RowSpan="4" Grid.ColumnSpan="2" 
                    Content="{Binding ProductProfile}" 
                    Validation.ErrorTemplate="{x:Null}">
                    <ContentControl.Style>
                        <Style TargetType="ContentControl">
                            <Setter Property="IsTabStop" Value="False"/>
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding ProductProfile.ProductType}" Value="Food">
                                    <Setter Property="ContentTemplate" Value="{StaticResource FoodProductProfile}"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding ProductProfile.ProductType}" Value="Drink">
                                    <Setter Property="ContentTemplate" Value="{StaticResource DrinkProductProfile}"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding ProductProfile.ProductType}" Value="Accessory">
                                    <Setter Property="ContentTemplate" Value="{StaticResource AccessoryProductProfile}"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </ContentControl.Style>
                </ContentControl>

            </Grid>

        </Border>

        <StackPanel Grid.Row="2" Style="{DynamicResource ProductManagementProfileEditContainerButtonStackPanelStyle}">
            <Button Content="{DynamicResource ProductManagementProfileEditSaveString}" IsDefault="True"  Command="{Binding SaveCommand}" Style="{DynamicResource ProductManagementProfileEditSaveButtonStyle}"/>
            <Button Content="{DynamicResource ProductManagementProfileEditCancelString}" IsCancel="True" Style="{DynamicResource ProductManagementProfileEditCancelButtonStyle}"/>
        </StackPanel>

    </Grid>

</Window>