<Window x:Class="PastryShop.View.LoginPage"
            xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
            xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
            xmlns:local="clr-namespace:PastryShop.Converter"
            KeyDown="Window_KeyDown"
            WindowStyle="None"
            WindowStartupLocation="CenterScreen"
            Height="600" Width="1000" MinHeight="535" MinWidth="800">

    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/Resource/Styles/LoginStyles.xaml"/>
            </ResourceDictionary.MergedDictionaries>
            <local:TypeToVisibilityConverter x:Key="TypeToVisibilityConverter"/>
            <local:FilterOptionToImagePathConverter x:Key="FilterOptionToImagePathConverter"/>
            <local:EnumToResourceKeyConverter x:Key="EnumToResourceKeyConverter"/>
        </ResourceDictionary>
    </Window.Resources>

    <Grid Style="{DynamicResource ContainerGridStyle}">

        <Grid.RowDefinitions>
            <RowDefinition Height="2*"/>
            <RowDefinition Height="3*"/>
            <RowDefinition Height="1*"/>
        </Grid.RowDefinitions>

        <Grid>
            <StackPanel Style="{DynamicResource LanguageStackPanelStyle}">
                <ComboBox
                    x:Name="LanguageComboBox"
                    ItemsSource="{Binding AvailableLanguages}"
                    SelectedItem="{Binding SelectedLanguage, Mode=TwoWay}"
                    ItemContainerStyle="{DynamicResource LanguageComboBoxItemStyle}"
                    Style="{DynamicResource LanguageComboBoxStyle}">
                    <ComboBox.ItemTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal">
                                <Image Source="{Binding Converter={StaticResource FilterOptionToImagePathConverter}}"
                                    Style="{DynamicResource LanguageItemImageStyle}"/>
                                <TextBlock Text="{Binding Converter={StaticResource EnumToResourceKeyConverter}, ConverterParameter=EditUserSettingLanguageOptions}"
                                    Style="{DynamicResource LanguageItemTextBlockStyle}"/>
                            </StackPanel>
                        </DataTemplate>
                    </ComboBox.ItemTemplate>
                </ComboBox>
            </StackPanel>
        </Grid>

        <Viewbox Grid.Row="0" Stretch="Uniform">
            <Image Source="/Resource/Images/Application/Base_Login_Logo.png" Style="{DynamicResource LogoImageStyle}"/>
        </Viewbox>

        <Grid Grid.Row="1" Style="{DynamicResource FieldsContainerGridStyle}">
            <Grid.RowDefinitions>
                <RowDefinition Height="3*"/>
                <RowDefinition Height="1*"/>
                <RowDefinition Height="2*"/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <TextBlock Grid.Row="0" Grid.Column="0" 
                Text="{DynamicResource LoginUsernameTextBlockString}"
                Style="{DynamicResource UsernameTextBlockStyle}"/>

            <TextBox Grid.Row="0" Grid.Column="1" TabIndex="0"
                x:Name="UsernameTextBox"
                Text="{Binding Username, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}" 
                Validation.ErrorTemplate="{StaticResource ValidationErrorTemplate}"
                Style="{DynamicResource UsernameTextBoxStyle}"/>

            <TextBlock Grid.Row="1" Grid.Column="0" 
                Text="{DynamicResource LoginPasswordTextBlockString}"
                Style="{DynamicResource PasswordTextBlockStyle}"/>

            <PasswordBox Grid.Row="1" Grid.Column="1" TabIndex="1"
                x:Name="PasswordBox"
                PasswordChanged="PasswordBox_PasswordChanged"
                Style="{DynamicResource PasswordBoxStyle}"/>

            <Label Grid.Row="2" Grid.Column="1"
                Content="{Binding PasswordError}"    
                Visibility="{Binding PasswordError, Converter={StaticResource TypeToVisibilityConverter}, ConverterParameter=StringNotEmpty}"
                Style="{DynamicResource PasswordErrorLabelStyle}"/>

        </Grid>

        <Viewbox Grid.Row="2" Style="{DynamicResource ContainerButtonViewboxStyle}">
            <StackPanel Style="{DynamicResource ContainerButtonStackPanelStyle}">
                <Button Content="{DynamicResource LoginOkButtonString}" Command="{Binding LoginCommand}" Style="{DynamicResource LoginButtonStyle}" IsDefault="True"/>
                <Button Content="{DynamicResource LoginCancelButtonString}" Command="{Binding CancelCommand}" Style="{DynamicResource CancelButtonStyle}"/>
            </StackPanel>
        </Viewbox>

    </Grid>

</Window>